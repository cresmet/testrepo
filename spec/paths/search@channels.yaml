parameters:
  - $ref: '#/components/parameters/authorizationHeader'
  - $ref: '#/components/parameters/apiKey'
  - $ref: '#/components/parameters/correlationId'
get:
  tags:
    - search
    - channels
  summary: Search Channels
  operationId: searchChannels
  security:
    - bearer: []
    - api_key: []
  description: >
    This endpoint allows clients to issue search requests against the Thingful
    API to discover specific channels on IoT resource indexed by Thingful, where
    they are searchable be various geographical and semantic parameters.


    Search results include only metadata - they never return observations for a
    Channel. To this data a client must then issue an access request to any
    channels of interest, optionally requesting a refresh of the data at that
    point.


    In addition for channels a client may issue a historical request for ranges
    of time series data for a specific channel once they have used search in
    order to discover it.
  parameters:
    - $ref: '#/components/parameters/longitude'
    - $ref: '#/components/parameters/latitude'
    - $ref: '#/components/parameters/radius'
    - $ref: '#/components/parameters/perPage'
    - $ref: '#/components/parameters/sort'
    - $ref: '#/components/parameters/nextCursor'
    - $ref: '#/components/parameters/providerId'
    - $ref: '#/components/parameters/licenseId'
    - $ref: '#/components/parameters/licensePermits'
    - $ref: '#/components/parameters/licenseRequires'
    - $ref: '#/components/parameters/licenseProhibits'
    - $ref: '#/components/parameters/quantityKind'
    - $ref: '#/components/parameters/measuredBy'
    - $ref: '#/components/parameters/unit'
    - $ref: '#/components/parameters/domain'
  responses:
    '200':
      description: Success
      headers:
        X-Correlation-Id:
          description: >-
            A request specific identifier returned by the server that can be
            used for debugging failing requests to the API. If a client supplies
            this header then this value will be returned to them, else a unique
            identifier will be generated on the server.
          schema:
            type: string
        X-RateLimit-Limit:
          description: The number of allowed requests for the current time period.
          schema:
            type: integer
        X-RateLimit-Remaining:
          description: >-
            The number of allowed requests remaining for the client within the
            current time period.
          schema:
            type: integer
        X-RateLimit-Rest:
          description: The number of seconds left in the current time period.
          schema:
            type: integer
      content:
        application/json:
          schema:
            type: object
            properties:
              '@context':
                $ref: '#/components/schemas/Context'
              links:
                type: object
                properties:
                  self:
                    type: string
                    format: url
                    example: >-
                      http://api.thingful.net/search/channels?domain=m3-lite:Weather
                  next:
                    type: string
                    format: url
                    example: >-
                      https://api.thingful.net/search/channels?domain=m3-lite:Weather&nextCursor=sb7td6gd
              data:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      $ref: '#/components/schemas/ChannelID'
                    type:
                      $ref: '#/components/schemas/ChannelType'
                    attributes:
                      type: object
                      allOf:
                        - $ref: '#/components/schemas/ChannelMetadataAttributes'
                        - $ref: '#/components/schemas/ChannelDataTypeAttributes'
                        - $ref: '#/components/schemas/ChannelExtraAttributes'
                        - $ref: '#/components/schemas/TimestampAttributes'
        text/csv:
          schema:
            type: object
            properties:
              '@context':
                $ref: '#/components/schemas/Context'
              links:
                type: object
                properties:
                  self:
                    type: string
                    format: url
                    example: >-
                      http://api.thingful.net/search/channels?domain=m3-lite:Weather
                  next:
                    type: string
                    format: url
                    example: >-
                      https://api.thingful.net/search/channels?domain=m3-lite:Weather&nextCursor=sb7td6gd
              data:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      $ref: '#/components/schemas/ChannelID'
                    type:
                      $ref: '#/components/schemas/ChannelType'
                    attributes:
                      type: object
                      allOf:
                        - $ref: '#/components/schemas/ChannelMetadataAttributes'
                        - $ref: '#/components/schemas/ChannelDataTypeAttributes'
                        - $ref: '#/components/schemas/ChannelExtraAttributes'
                        - $ref: '#/components/schemas/TimestampAttributes'
    '401':
      $ref: '#/components/responses/401ErrorResponse'
    '403':
      $ref: '#/components/responses/403ErrorResponse'
    '500':
      $ref: '#/components/responses/500ErrorResponse'
